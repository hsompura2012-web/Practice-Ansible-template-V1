- name: install maven
  ansible.builtin.dnf:
    name: maven
    state: latest

- name: Import App Prereq
  ansible.builtin.import_tasks: AppPrereq.yaml

- name: installing mavem dependencies
  ansible.builtin.shell: mvn clean package ; mv target/shipping-1.0.jar shipping.jar
  args:
    chdir: /app/

- name: install mysql
  ansible.builtin.dnf:
    name: mysql
    state: latest

- name: create schema details
  ansible.builtin.shell: mysql -h mysql-{{ env }}.harshitsompura.online -uroot -pRoboShop@1 < /app/db/schema.sql

- name: create schema app user details
  ansible.builtin.shell: mysql -h mysql-{{ env }}.harshitsompura.online -uroot -pRoboShop@1 < /app/db/app-user.sql

- name: create schema app user details
  ansible.builtin.shell: mysql -h mysql-{{ env }}.harshitsompura.online -uroot -pRoboShop@1 < /app/db/master-data.sql

- name: Import systemd
  ansible.builtin.import_tasks: systemd.yaml
